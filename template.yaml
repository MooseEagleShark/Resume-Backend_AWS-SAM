#template from https://github.com/aws-samples/aws-sam-github-actions-example
  AWSTemplateFormatVersion: '2010-09-09'
  Transform: AWS::Serverless-2016-10-31
  Description: A SAM (Serverless Application Model) that uses a transforma & Cloudformation to creat api gateway, lamda function, and dynamo db table necessary to store a visitor counter.

  Parameters:

    Name:
      Type: String
      Description: heyitslogan.com resume stack

  Resources:
NewVisitorFunction:
      Type: AWS::Serverless::Function
      Properties:
        Handler: function.write_ip_datetime_handler
        Runtime: python3.8
        CodeUri: ./lambda_python_functions/
        Description: send ip datetime, store ip datetime in dynamodb, return count of unique ip
        AutoPublishAlias: live
        Events:
          ApiEvent:
            Type: Api
            Properties:
              Path: /count_visitors
              Method: get


    visitors:
        Type: AWS::Serverless::SimpleTable #or AWS::DynamoDB::Table as "This property is passed directly to the TableName property of an AWS::DynamoDB::Table resource.  - This property is passed directly to the TableName property of an AWS::DynamoDB::Table resource.
        Properties:
          TableName: visitors
          PrimaryKey:
            Name: ip-datetime
            Type: String
          Tags:
              AppType: Serverless
              Name: LoganResume
